SET TERM ^ ;

CREATE PROCEDURE EVENT_UPDATE (IN_MASTERID INTEGER, IN_EVENT_CALENDAR_ID VARCHAR(60), IN_EVENT_DESCRIPTION VARCHAR(255), IN_EVENT_LOCATION VARCHAR(255), IN_EVENT_START TIMESTAMP, IN_EVENT_FINISH TIMESTAMP)
AS
BEGIN

  /* Aggiorna l'impegno con i dati ricevuti */
  UPDATE IMPEGNI SET
  IMPEGNI.EVENTMESSAGE = :IN_EVENT_DESCRIPTION,
  IMPEGNI.LOCATION = :IN_EVENT_LOCATION,
  IMPEGNI.START_EVENT = :IN_EVENT_START,
  IMPEGNI.FINISH_EVENT = :IN_EVENT_FINISH,
  IMPEGNI.RESOURCEID = COALESCE(   (SELECT TECNICI.RESOURCEID FROM TECNICI WHERE GCAL_CALENDAR_ID = :IN_EVENT_CALENDAR_ID)   , 1)
  WHERE IMPEGNI.MASTER_ID = :IN_MASTERID;

  /* Exit */
  EXIT;

END^

SET TERM ; ^
