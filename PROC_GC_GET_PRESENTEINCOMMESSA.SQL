CREATE PROCEDURE GC_GET_PRESENTEINCOMMESSA (IN_COD_ART VARCHAR(25), IN_COD_CANT INTEGER, IN_DATA_CANT TIMESTAMP)
  RETURNS (OUTVAR CHAR(1))
AS
  DECLARE C CURSOR FOR (SELECT COUNT(*) FROM RIGHIPRV WHERE CODICEARTICOLO=:IN_COD_ART AND PRATICA=:IN_COD_CANT AND DATAPRATICA1=:IN_DATA_CANT AND SEGNOOPERAZIONECANTIERE='C');
  DECLARE VARIABLE loc_quanti INTEGER;
BEGIN

  OPEN C;
  FETCH C INTO :loc_quanti;
  CLOSE C;

  IF (:loc_quanti = 0) THEN BEGIN
    OUTVAR='F';
    SUSPEND;
    EXIT;
  END

  OUTVAR='T';
  SUSPEND;
  EXIT;

END