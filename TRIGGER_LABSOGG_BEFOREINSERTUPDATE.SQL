CREATE TRIGGER LABSOGG_BEFOREINSERTUPDATE FOR LABSOGG
ACTIVE BEFORE INSERT OR UPDATE
AS
  DECLARE LAST_ID INTEGER;
BEGIN
 
  SELECT COALESCE(MAX(LS2.ID), 0)
  FROM LABSOGG LS2 
  WHERE LS2.CODICESTAZIONE = NEW.CODICESTAZIONE  
  INTO :LAST_ID;

  NEW.ID = LAST_ID + 1;

END
