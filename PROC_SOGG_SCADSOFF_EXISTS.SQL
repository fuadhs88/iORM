SET TERM ^ ;

CREATE PROCEDURE SOGG_SCADSOFF_EXISTS (IN_ID INTEGER)
  RETURNS (OUTVAL CHAR(1))
AS
BEGIN

  IF (EXISTS(SELECT NULL FROM SCADENZ S WHERE S.CLIENTE=:IN_ID AND S.DATASCADENZA < CAST('TODAY' AS TIMESTAMP) AND IMPORTOPAGATO < IMPORTO)) 
    THEN OUTVAL = 'T';
    ELSE OUTVAL = 'F';

  SUSPEND;
  EXIT;

END^

SET TERM ; ^
