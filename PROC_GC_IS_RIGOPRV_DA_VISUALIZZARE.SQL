CREATE PROCEDURE GC_IS_RIGOPRV_DA_VISUALIZZARE (IN_CODART VARCHAR(25), IN_TIPODOC VARCHAR(25), IN_NUMDOC INTEGER, IN_REGDOC VARCHAR(5), IN_DATADOC TIMESTAMP, IN_NUMRIGO INTEGER, IN_SEGNOOP CHAR(1))
  RETURNS (OUTVAR CHAR(1))
AS
  DECLARE VARIABLE loc_IsRigoManodopera CHAR(1);
  DECLARE VARIABLE loc_IsRigoManodoperaConDettagli CHAR(1);
BEGIN

  IF (:IN_CODART IS NULL OR :IN_SEGNOOP='F' OR :IN_SEGNOOP='C' OR :IN_TIPODOC='Giornale cantiere') THEN BEGIN
    OUTVAR='T';
    SUSPEND;
    EXIT;
  END

  EXECUTE PROCEDURE GC_ISMANODOPERA :IN_CODART RETURNING_VALUES :loc_IsRigoManodopera;

  IF (:loc_IsRigoManodopera = 'F') THEN BEGIN
    OUTVAR='T';
    SUSPEND;
    EXIT;
  END

  EXECUTE PROCEDURE GC_IS_RIGO_MANODOPERA_CON_DETT :IN_TIPODOC, :IN_NUMDOC, :IN_REGDOC, :IN_DATADOC, :IN_NUMRIGO RETURNING_VALUES :loc_IsRigoManodoperaConDettagli;

  IF (:loc_IsRigoManodoperaConDettagli = 'F') THEN BEGIN
    OUTVAR='T';
    SUSPEND;
    EXIT;
  END

  OUTVAR='F';
  SUSPEND;
  EXIT;

END